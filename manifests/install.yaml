apiVersion: apps/v1
kind: Deployment
metadata:
  name: argocd-o11y-server
spec:
  selector:
    matchLabels:
      app: argocd-o11y-server
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: argocd-o11y-server
    spec:
      containers:
        - env:
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: WAVEFRONT_ADDRESS
            value: https://intuit.wavefront.com/
          - name: WAVEFRONT_TOKEN
            value: ""
          image: sarabala1979/argo-o11y-server:v8
          imagePullPolicy: IfNotPresent
          name: argocd-o11y-server
          volumeMounts:
          - name: config-volume
            mountPath: /app/config.json
            subPath: config.json
      volumes:
      - name: config-volume
        configMap:
          name: argocd-o11y-server-configmap
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: argocd-o11y-server
  name: argocd-o11y-server
spec:
  ports:
    - name: metrics
      port: 9003
      targetPort: 9003
  selector:
    app: argocd-o11y-server
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-o11y-server-configmap
data:
  config.json: |
     "prometheus": {
        "applications": [
          {
            "name": "default",
            "default": true,
            "dashboards": [
              {
                "groupKind": "pod",
                "rows": [
                  {
                    "name": "containers",
                    "title": "Containers",
                    "graphs": [
                      {
                        "name": "container_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      }
                    ]
                  },
                  {
                    "name": "images",
                    "title": "Images",
                    "graphs": [
                      {
                        "name": "image_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      }
                    ]
                  },
                  {
                    "name": "pods",
                    "title": "Pods",
                    "graphs": [
                      {
                        "name": "pod_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      }
                    ]
                  },
                  {
                    "name": "instances",
                    "title": "Instances",
                    "graphs": [
                      {
                        "name": "instances_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      }
                    ]
                  },
                  {
                    "name": "jobs",
                    "title": "Jobs",
                    "graphs": [
                      {
                        "name": "jobs_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      }
                    ]
                  }
                ]
              },
              {
                "groupKind": "replicaset",
                "rows": [
                  {
                    "name": "containers",
                    "title": "Containers",
                    "graphs": [
                      {
                        "name": "container_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      }
                    ]
                  },
                  {
                    "name": "images",
                    "title": "Images",
                    "graphs": [
                      {
                        "name": "image_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      }
                    ]
                  },
                  {
                    "name": "pods",
                    "title": "Pods",
                    "graphs": [
                      {
                        "name": "pod_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      }
                    ]
                  },
                  {
                    "name": "instances",
                    "title": "Instances",
                    "graphs": [
                      {
                        "name": "instances_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      }
                    ]
                  },
                  {
                    "name": "jobs",
                    "title": "Jobs",
                    "graphs": [
                      {
                        "name": "jobs_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      }
                    ]
                  }
                ]
              },
              {
                "groupKind": "rollout",
                "rows": [
                  {
                    "name": "containers",
                    "title": "Containers",
                    "graphs": [
                      {
                        "name": "container_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      }
                    ]
                  },
                  {
                    "name": "images",
                    "title": "Images",
                    "graphs": [
                      {
                        "name": "image_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      }
                    ]
                  },
                  {
                    "name": "pods",
                    "title": "Pods",
                    "graphs": [
                      {
                        "name": "pod_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      }
                    ]
                  },
                  {
                    "name": "instances",
                    "title": "Instances",
                    "graphs": [
                      {
                        "name": "instances_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      }
                    ]
                  },
                  {
                    "name": "jobs",
                    "title": "Jobs",
                    "graphs": [
                      {
                        "name": "jobs_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      }
                    ]
                  }
                ]
              },
              {
                "groupKind": "deployment",
                "rows": [
                  {
                    "name": "containers",
                    "title": "Containers",
                    "graphs": [
                      {
                        "name": "container_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      }
                    ]
                  },
                  {
                    "name": "images",
                    "title": "Images",
                    "graphs": [
                      {
                        "name": "image_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      }
                    ]
                  },
                  {
                    "name": "pods",
                    "title": "Pods",
                    "graphs": [
                      {
                        "name": "pod_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      }
                    ]
                  },
                  {
                    "name": "instances",
                    "title": "Instances",
                    "graphs": [
                      {
                        "name": "instances_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      }
                    ]
                  },
                  {
                    "name": "jobs",
                    "title": "Jobs",
                    "graphs": [
                      {
                        "name": "jobs_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      }
                    ]
                  }
                ]
              },
              {
                "groupKind": "application",
                "rows": [
                  {
                    "name": "containers",
                    "title": "Containers",
                    "graphs": [
                      {
                        "name": "container_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      },
                      {
                        "name": "container_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (container)"
                      }
                    ]
                  },
                  {
                    "name": "images",
                    "title": "Images",
                    "graphs": [
                      {
                        "name": "image_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      },
                      {
                        "name": "image_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (image)"
                      }
                    ]
                  },
                  {
                    "name": "pods",
                    "title": "Pods",
                    "graphs": [
                      {
                        "name": "pod_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      },
                      {
                        "name": "pod_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                      }
                    ]
                  },
                  {
                    "name": "instances",
                    "title": "Instances",
                    "graphs": [
                      {
                        "name": "instances_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      },
                      {
                        "name": "instances_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (instance)"
                      }
                    ]
                  },
                  {
                    "name": "jobs",
                    "title": "Jobs",
                    "graphs": [
                      {
                        "name": "jobs_cpu_line",
                        "title": "CPU",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_cpu_pie",
                        "title": "CPU Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_line",
                        "title": "Memory",
                        "description": "",
                        "graphType": "line",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      },
                      {
                        "name": "jobs_memory_pie",
                        "title": "Mem Avg",
                        "description": "",
                        "graphType": "pie",
                        "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"{{.name}}\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (job)"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ],
        "provider":
        {
          "Name": "default",
          "default": true,
          "address": "http://prometheus-service.monitoring.svc.cluster.local:8080"
        }
      }
    }
